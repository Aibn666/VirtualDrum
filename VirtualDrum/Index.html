<!DOCTYPE html>
    <head>
        <title>BateriaVirtual</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <h1>Virtual Drum</h1>
        <nav>
            <button id="barra"><b>Inicio</b></button>
        </nav>
        <section>
            <main>
                <div class="flex-container">
                    <div class="flex-item"><button data-key="81" class="key" id="clap"><b>Q</b></button></div>
                    <div class="flex-item"><button data-key="87" class="key" id="clap"><b>W</b></button></div>
                    <div class="flex-item"><button data-key="69" class="key" id="clap"><b>E</b></button></div>
                    <div class="flex-item"><button data-key="65" class="key" id="kick"><b>A</b></button></div>
                    <div class="flex-item"><button data-key="83" class="key" id="kick"><b>S</b></button></div>
                    <div class="flex-item"><button data-key="68" class="key" id="kick"><b>D</b></button></div>
                    <div class="flex-item"><button data-key="90" class="key"><b>Z</b></button></div>
                    <div class="flex-item"><button data-key="88" class="key"><b>X</b></button></div>
                    <div class="flex-item"><button data-key="67" class="key"><b>C</b></button></div>
                </div>
            </main>
        </section>

        <audio data-key="81" src="sounds/clap.mp3"></audio>
        <audio data-key="87" src="sounds/kick.wav"></audio>
        <audio data-key="69" src="sounds/hihat.wav"></audio>
        <audio data-key="65" src="sounds/snare.wav"></audio>
        <audio data-key="83" src="sounds/snare.wav"></audio>
        <audio data-key="68" src="sounds/clap.mp3"></audio>
        <audio data-key="90" src="sounds/clap.mp3"></audio>
        <audio data-key="88" src="sounds/clap.mp3"></audio>
        <audio data-key="67" src="sounds/clap.mp3"></audio>


        <script>
            function clap(){
                const audio = document.querySelector(`audio[data-key="81"]`);
                document.querySelector(`audio[data-key="81"]`);
                if(!audio) return;
                audio.currentTime = 0;
                audio.play();
            }
            document.getElementById("clap").onclick = function(){
                clap();
            }

            function kick(){
                const audio = document.querySelector(`audio[data-key="65"]`);
                document.querySelector(`audio[data-key="65"]`);
                if(!audio) return;
                audio.currentTime = 0;
                audio.play();
            }
            document.getElementById("kick").onclick = function(){
                kick();
            }


            function playSound(e){
                const audio = document.querySelector(`audio[data-key="${e.keyCode}"]`);
                const key = document.querySelector(`.key[data-key="${e.keyCode}"]`);
                if(!audio) return; // stop the function from all together
                audio.currentTime = 0; //rewind to the start
                audio.play();
                key.classList.add('playing');
            }

            function removeTransition(e){
                if (e.propertyName !== 'transform') return;
                this.classList.remove('playing');
            }

            const keys = document.querySelectorAll('.key');
            keys.forEach(key => key.addEventListener('transitionEnd', removeTransition));
            
            window.addEventListener('keydown', playSound);
        </script>
    </body>



</html>